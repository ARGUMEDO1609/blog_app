<div class="max-w-4xl mx-auto py-8 px-4">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-gray-800">📚 Publications</h1>
    <%= link_to "➕ New Post", new_post_path,
        data: { turbo_frame: "modal" },
        class: "bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg shadow transition" %>
  </div>

  <%= form_with url: search_posts_path, method: :get, local: true, class: "mb-6 flex gap-2" do %>
    <%= text_field_tag :q, params[:q], placeholder: "Buscar por título o etiqueta",
        class: "flex-grow border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-300 focus:border-blue-400 outline-none" %>
    <%= submit_tag "🔍 Search",
        class: "bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow transition" %>
  <% end %>

  <% if @posts.any? %>
    <div class="space-y-6">
      <% @posts.each do |post| %>
        
        <div class="mt-6">
          <%= paginate @posts %>
        </div>
        <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition border border-gray-100">
          <h2 class="text-xl font-semibold text-gray-800 mb-1">
            <%= link_to post.title, post_path(post), class: "hover:underline" %>
          </h2>
          <p class="text-sm text-gray-500 mb-3">✍️ Por <%= post.user.email %></p>
          <p class="text-gray-700 mb-4 leading-relaxed">
            <%= truncate(post.body, length: 200) %>
          </p>
          <div class="flex flex-wrap gap-2">
            <% post.tags.each do |tag| %>
              <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-xs font-medium border border-gray-200">
                #<%= tag.name %>
              </span>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-center text-gray-500 mt-12 text-lg">🚫 No posts found.</p>
  <% end %>
</div>
