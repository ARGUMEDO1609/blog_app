<div class="max-w-3xl mx-auto mt-8">
  <h1 class="text-2xl font-bold mb-4">Publicaciones</h1>

  <%= form_with url: search_posts_path, method: :get, local: true, class: "mb-4 flex gap-2" do %>
    <%= text_field_tag :q, params[:q], placeholder: "Buscar por título o etiqueta", class: "w-full border p-2 rounded" %>
    <%= submit_tag "Buscar", class: "bg-blue-500 text-white px-4 py-2 rounded" %>
  <% end %>

  <% @posts.each do |post| %>
    <div class="bg-white p-4 rounded shadow mb-4">
      <h2 class="text-xl font-bold"><%= link_to post.title, post_path(post) %></h2>
      <p class="text-gray-600 text-sm">Por <%= post.user.email %></p>
      <p class="mt-2"><%= truncate(post.body, length: 150) %></p>

      <div class="mt-2">
        <% post.tags.each do |tag| %>
          <span class="inline-block bg-gray-100 px-2 py-1 rounded text-sm mr-2">#<%= tag.name %></span>
        <% end %>
      </div>
    </div>
  <% end %>

  <% if @posts.empty? %>
    <p class="text-gray-500">No se encontraron publicaciones.</p>
  <% end %>

  <%= link_to "Nueva publicación", new_post_path, class: "bg-green-600 text-white px-4 py-2 rounded mt-4 inline-block" %>
</div>
